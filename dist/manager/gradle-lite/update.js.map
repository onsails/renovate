{"version":3,"file":"update.js","sourceRoot":"","sources":["../../../lib/manager/gradle-lite/update.ts"],"names":[],"mappings":";;;AAAA,yCAAsC;AAGtC,mCAA+C;AAE/C,SAAgB,gBAAgB,CAAC,EAC/B,WAAW,EACX,OAAO,GAC6B;IACpC,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,OAAO,CAAC;IACjE,MAAM,MAAM,GAAG,WAAW,CAAC,mBAAmB,CAAC;IAC/C,MAAM,QAAQ,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;IAC9C,MAAM,SAAS,GAAG,WAAW,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAC5C,MAAM,OAAO,GAAG,4BAAoB,CAAC,SAAS,CAAC,CAAC;IAChD,IAAI,OAAO,EAAE;QACX,MAAM,oBAAoB,GAAG,OAAO,CAAC,MAAM,CAAC;QAC5C,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;QACvD,IAAI,OAAO,KAAK,QAAQ,EAAE;YACxB,OAAO,WAAW,CAAC;SACpB;QACD,IAAI,OAAO,KAAK,YAAY,IAAI,OAAO,CAAC,SAAS,EAAE;YACjD,OAAO,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;SACvC;QACD,eAAM,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,EAAE,eAAe,CAAC,CAAC;KAC7E;SAAM;QACL,eAAM,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,EAAE,cAAc,CAAC,CAAC;KACnE;IACD,OAAO,IAAI,CAAC;AACd,CAAC;AAvBD,4CAuBC","sourcesContent":["import { logger } from '../../logger';\nimport { UpdateDependencyConfig } from '../common';\nimport { ManagerData } from './common';\nimport { versionLikeSubstring } from './utils';\n\nexport function updateDependency({\n  fileContent,\n  upgrade,\n}: UpdateDependencyConfig<ManagerData>): string | null {\n  const { depName, currentValue, newValue, managerData } = upgrade;\n  const offset = managerData.fileReplacePosition;\n  const leftPart = fileContent.slice(0, offset);\n  const rightPart = fileContent.slice(offset);\n  const version = versionLikeSubstring(rightPart);\n  if (version) {\n    const versionClosePosition = version.length;\n    const restPart = rightPart.slice(versionClosePosition);\n    if (version === newValue) {\n      return fileContent;\n    }\n    if (version === currentValue || upgrade.groupName) {\n      return leftPart + newValue + restPart;\n    }\n    logger.debug({ depName, version, currentValue, newValue }, 'Unknown value');\n  } else {\n    logger.debug({ depName, currentValue, newValue }, 'Wrong offset');\n  }\n  return null;\n}\n"]}